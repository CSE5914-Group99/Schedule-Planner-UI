<div class="landing">
  <h2 class="title">Schedule Planner</h2>

  <!-- Upcoming at top -->
  <section class="card">
    <h3>Upcoming (next 5)</h3>
    <div *ngIf="!upcoming.length" class="muted">No upcoming items.</div>
    <ul class="upcoming">
      <li *ngFor="let u of upcoming">
        <strong>[{{ u.type }}]</strong>
        {{ u.title }} — {{ u.date }} {{ u.start }}–{{ u.end }}
        <span *ngIf="u.location"> &#64; {{ u.location }}</span>
      </li>
    </ul>
  </section>

  <div class="layout">
    <!-- Left Difficulty -->
    <aside class="card side">
      <h4>Estimated Difficulty</h4>
      <p class="muted">
        This schedule has an estimated difficulty of
        <strong>{{ schedule.difficultyScore }}</strong> hours per week
      </p>
      <button class="btn ghost" (click)="recalc()">Estimate Difficulty</button>

      <div class="divider"></div>

      <h4>Backend</h4>
      <button class="btn" (click)="checkBackend()">Check backend health</button>
      <div class="muted" *ngIf="healthLoading">Checking backend...</div>
      <pre
        *ngIf="health"
        class="muted"
        style="white-space: pre-wrap; max-height: 6rem; overflow: auto"
        >{{ health }}</pre
      >

      <div class="divider"></div>

      <button class="btn" (click)="router.navigate(['/schedule/new'])">
        Open Schedule Builder
      </button>
      <button class="btn" (click)="router.navigate(['/schedules'])">View saved schedules</button>
    </aside>

    <!-- Schedule -->
    <app-weekly-schedule [schedule]="schedule"></app-weekly-schedule>
  </div>

  <!-- builder form removed on landing (read-only page) -->
</div>
